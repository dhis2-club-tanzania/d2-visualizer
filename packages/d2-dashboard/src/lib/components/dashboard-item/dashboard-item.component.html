<div class="d2-dashboard__visualization-container" [id]="dashboardContainerId">
  <div class="d2-dashboard__visualization-header">
    <button
      mat-stroked-button
      [matTooltip]="'Hide fullscreen'"
      (click)="onFullScreenAction($event)"
      *ngIf="fullScreen"
      class="d2-dashboard__more-btn"
    >
      <mat-icon>fullscreen</mat-icon>
    </button>
    <button
      mat-stroked-button
      [matTooltip]="'More'"
      [matMenuTriggerFor]="menu"
      class="d-print-none bg-white d2-dashboard__more-btn"
      *ngIf="!fullScreen"
    >
      <mat-icon>more_vert</mat-icon>
    </button>
    <mat-menu #menu="matMenu" xPosition="before">
      <button mat-menu-item (click)="onFullScreenAction($event)">
        <mat-icon>fullscreen</mat-icon>
        <span>{{ fullScreen ? 'Hide fullscreen' : 'View in fullscreen' }}</span>
      </button>
      <button mat-menu-item (click)="onDownload($event, 'PNG')" *ngIf="isChart">
        <span>Download chart in png</span>
      </button>
      <button mat-menu-item (click)="onDownload($event, 'CSV')" *ngIf="isChart">
        <span>Download chart data in csv</span>
      </button>
    </mat-menu>
  </div>
  <div
    *ngIf="!hideVisualization"
    [id]="dashboardItem?.visualization?.id || 'visualization_id'"
    [style.height]="
      'calc(' +
      (fullScreen ? '100vh' : visualizationContainerHeight) +
      ' - 16px)'
    "
  ></div>

  <div
    class="d2-dashboard__visualization-loading-overlay"
    *ngIf="loading$ | async"
  >
    <mat-spinner [strokeWidth]="2" [diameter]="30"></mat-spinner>
  </div>
</div>
