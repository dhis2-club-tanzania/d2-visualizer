<div
  class="d2-dashboard__current-dashboard-container"
  *ngIf="currentDashboard$ | async as currentDashboard"
>
  <d2-current-dashboard-header
    [dashboard]="currentDashboard"
    (setGlobalFilter)="onSetGlobalFilter($event, currentDashboard.id)"
  ></d2-current-dashboard-header>

  <ng-container *ngIf="{ globalSelection: globalSelection$ | async } as params">
    <div
      class="d2-dashboard__selection-description"
      *ngIf="params.globalSelection?.summary"
    >
      {{ params.globalSelection?.summary }}
    </div>
    <div
      class="d2-dashboard__dashboard-selection-summary"
      *ngIf="!params.globalSelection?.default"
    >
      <d2-dashboard-selection-summary
        [globalSelection]="params?.globalSelection || undefined"
        (removeSelection)="onSetGlobalFilter($event, currentDashboard.id)"
      ></d2-dashboard-selection-summary>
    </div>

    <d2-dashboard-items
      [dashboardItems]="currentDashboard?.dashboardItems || []"
      [dataSelections]="params?.globalSelection?.dataSelections || []"
      [dashboardItemsLayout]="currentDashboard?.dashboardItemsLayout || []"
    ></d2-dashboard-items>
  </ng-container>

  <ng-container *ngIf="error"> Dashboard Error </ng-container>
</div>
